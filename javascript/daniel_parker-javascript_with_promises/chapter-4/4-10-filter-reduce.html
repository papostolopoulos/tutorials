<!DOCTYPE html>
<html>
<head>
<title>4-10. Using a promise-enabled filter and reduce</title>
<link href="../prism.css" rel="stylesheet">
<script src="../prism.js"></script>

<script src="https://cdn.jsdelivr.net/bluebird/2.9.27/bluebird.min.js"></script>
<script>
var Bluebird = Promise.noConflict();

function sumOddNumbers(numbers) {
	return numbers.filter(function removeEvenNumbers(num) {
		return num % 2 == 1;
	}).reduce(function sum(runningTotal, num) {
		return runningTotal + num;
	}, 0);
}

// Use sumOddNumbers as a synchronous function
var firstSum = sumOddNumbers([1, 2, 3, 4]);
console.log('first sum: ' + firstSum);

// Use sumOddNumbers as an async function
var promise = Bluebird.resolve([5, 6, 7, 8]);
sumOddNumbers(promise).then(function (secondSum) {
	console.log('second sum: ' + secondSum);
});
</script>

</head>
<body>

<nav>
<a href="4-09-promisify-context.html">Previous</a> | <a href="4-11-eager-invocation.html">Next</a>
</nav>

<h1>Example 4-10. Using a promise-enabled filter and reduce</h1>

<pre>
<code class="language-javascript">
function sumOddNumbers(numbers) {
	return numbers.filter(function removeEvenNumbers(num) {
		return num % 2 == 1;
	}).reduce(function sum(runningTotal, num) {
		return runningTotal + num;
	}, 0);
}

// Use sumOddNumbers as a synchronous function
var firstSum = sumOddNumbers([1, 2, 3, 4]);
console.log('first sum: ' + firstSum);

// Use sumOddNumbers as an async function
var promise = Bluebird.resolve([5, 6, 7, 8]);
sumOddNumbers(promise).then(function (secondSum) {
	console.log('second sum: ' + secondSum);
});

// Console output:
// first sum: 4
// second sum: 12
</code>
</pre>

</body>
</html>
